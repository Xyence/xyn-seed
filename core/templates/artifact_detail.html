{% extends "base.html" %}

{% block title %}Artifact {{ artifact.name }} - Xyn Seed Core{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Artifact Detail</h2>
    <p class="meta"><a href="/ui/artifacts">‚Üê Back to Artifacts</a></p>
</div>

<div class="card">
    <h3>{{ artifact.name }}</h3>
    <table style="margin-top: 1rem;">
        <tr>
            <th style="width: 200px;">Artifact ID</th>
            <td><code>{{ artifact.id }}</code></td>
        </tr>
        <tr>
            <th>Name</th>
            <td>{{ artifact.name }}</td>
        </tr>
        <tr>
            <th>Kind</th>
            <td><code>{{ artifact.kind }}</code></td>
        </tr>
        <tr>
            <th>Content Type</th>
            <td>{{ artifact.content_type }}</td>
        </tr>
        <tr>
            <th>Size</th>
            <td>{{ (artifact.byte_length / 1024) | round(2) if artifact.byte_length else 0 }} KB ({{ artifact.byte_length or 0 }} bytes)</td>
        </tr>
        <tr>
            <th>SHA256</th>
            <td><code>{{ artifact.sha256 or '-' }}</code></td>
        </tr>
        <tr>
            <th>Created At</th>
            <td>{{ artifact.created_at.strftime('%Y-%m-%d %H:%M:%S UTC') }}</td>
        </tr>
        <tr>
            <th>Created By</th>
            <td>{{ artifact.created_by }}</td>
        </tr>
        {% if artifact.run_id %}
        <tr>
            <th>Run</th>
            <td><a href="/ui/runs/{{ artifact.run_id }}">{{ artifact.run_id }}</a></td>
        </tr>
        {% endif %}
    </table>

    {% if artifact.extra_metadata %}
    <h4 style="margin-top: 1.5rem;">Metadata</h4>
    <pre>{{ artifact.extra_metadata | tojson(indent=2) }}</pre>
    {% endif %}

    <div style="margin-top: 1.5rem;">
        <a href="/api/v1/artifacts/{{ artifact.id }}/download" class="btn btn-primary">Download Artifact</a>
    </div>
</div>

{% if run %}
<div class="card">
    <h3>Associated Run</h3>
    <p><strong>{{ run.name }}</strong></p>
    <p class="meta">
        Status:
        {% if run.status.value == 'completed' %}
        <span class="badge badge-success">{{ run.status.value }}</span>
        {% elif run.status.value == 'failed' %}
        <span class="badge badge-danger">{{ run.status.value }}</span>
        {% elif run.status.value == 'running' %}
        <span class="badge badge-info">{{ run.status.value }}</span>
        {% else %}
        <span class="badge badge-secondary">{{ run.status.value }}</span>
        {% endif %}
    </p>
    <a href="/ui/runs/{{ run.id }}" class="btn btn-secondary">View Run Details</a>
</div>
{% endif %}
{% endblock %}
